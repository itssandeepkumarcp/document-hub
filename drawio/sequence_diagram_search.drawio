<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.3.0 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.3.0">
  <diagram name="Page-1" id="w4lNcYvJX3PEmGqFGQAg">
    <mxGraphModel dx="1106" dy="788" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="6n2m-XyReEJoCltwB4P5-1" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="User" vertex="1">
          <mxGeometry height="2039" width="150" x="20" y="20" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-2" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="Web Application" vertex="1">
          <mxGeometry height="2039" width="150" x="392" y="20" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-3" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="Azure AD B2C" vertex="1">
          <mxGeometry height="2039" width="150" x="623" y="20" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-4" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="API Backend" vertex="1">
          <mxGeometry height="2039" width="150" x="823" y="20" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-5" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="Cognitive Search" vertex="1">
          <mxGeometry height="2039" width="150" x="1140" y="20" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-6" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="Azure SQL Database" vertex="1">
          <mxGeometry height="2039" width="170" x="1340" y="20" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-7" parent="1" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" value="Blob Storage" vertex="1">
          <mxGeometry height="2039" width="150" x="1560" y="20" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-8" parent="1" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=30" value="alt" vertex="1">
          <mxGeometry height="579" width="1562" x="84" y="1385" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-9" parent="6n2m-XyReEJoCltwB4P5-8" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" value="[User has permission]" vertex="1">
          <mxGeometry height="20" width="1532" x="30" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-10" parent="6n2m-XyReEJoCltwB4P5-8" style="shape=line;dashed=1;whiteSpace=wrap;verticalAlign=top;labelPosition=center;verticalLabelPosition=middle;align=center;strokeColor=#B3B3B3;" value="[Permission denied]" vertex="1">
          <mxGeometry height="4" width="1562" y="443" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-11" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-1" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-2" value="Enter search query&#xa;(keywords, filters: project, category, date)">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="290" y="191" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-12" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-2" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-3" value="Validate session token">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="591" y="239" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-13" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-3" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-2" value="Token valid">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="594" y="287" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-14" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-2" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-4" value="GET /api/documents/search&#xa;?q=keywords&amp;project_id=1&amp;category=legal&amp;from_date=2024-01-01">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="727" y="354" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-15" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-5" value="Search query with filters">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1065" y="469" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-16" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-5" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-4" value="Ranked results with highlights&#xa;[{document_id, score, highlights}]">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1068" y="733" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-17" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-6" value="SELECT documents with metadata&#xa;WHERE document_id IN (...)">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1170" y="800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-18" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-6" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-4" value="Full document records&#xa;(including permissions)">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1173" y="867" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-19" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-2" value="200 OK&#xa;{results: [...], total_count, facets}">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="694" y="1057" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-20" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-2" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-1" value="Display search results&#xa;(with highlights &amp; preview)">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="293" y="1124" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-21" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-1" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-2" value="Click to view/download document">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="290" y="1221" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-22" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-2" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-4" value="GET /api/documents/{id}/download">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="691" y="1269" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-23" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-6" value="SELECT document &amp; check permissions">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1170" y="1317" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-24" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-6" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-4" value="Document record (if authorized)">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1173" y="1365" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-25" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-7" value="Generate SAS token&#xa;(with 1-hour expiration)">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1275" y="1477" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-26" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-7" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-4" value="Signed URL">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1278" y="1525" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-27" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-6" value="INSERT AuditLog&#xa;(action: download)">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1170" y="1592" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-28" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-2" value="200 OK&#xa;{download_url: signed_url}">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="694" y="1659" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-29" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-2" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-7" value="Download file via signed URL">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="1707" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-30" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-7" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-2" value="File stream">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1063" y="1755" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-31" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-2" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-1" value="Display/download document">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="293" y="1803" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-32" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-4" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-2" value="403 Forbidden">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="694" y="1896" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-33" edge="1" parent="1" source="6n2m-XyReEJoCltwB4P5-2" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" target="6n2m-XyReEJoCltwB4P5-1" value="Access denied message">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="293" y="1944" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-34" parent="1" style="fillColor=#ffff88;strokeColor=#9E916F;" value="Document Search Flow" vertex="1">
          <mxGeometry height="49" width="1590" x="70" y="95" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-35" parent="1" style="fillColor=#ffff88;strokeColor=#9E916F;" value="Validate authentication&#xa;Extract user context" vertex="1">
          <mxGeometry height="67" width="186" x="805" y="374" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-36" parent="1" style="fillColor=#ffff88;strokeColor=#9E916F;" value="Full-text search on:&#xa;- document_name&#xa;- notes&#xa;- ocr_text&#xa;&#xa;Filters on:&#xa;- project_id&#xa;- categories&#xa;- uploaded_at" vertex="1">
          <mxGeometry height="197" width="159" x="1136" y="489" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-37" parent="1" style="fillColor=#ffff88;strokeColor=#9E916F;" value="Enrich results with:&#xa;- User names&#xa;- Project names&#xa;- Category names&#xa;- Check user permissions" vertex="1">
          <mxGeometry height="123" width="205" x="796" y="887" as="geometry" />
        </mxCell>
        <mxCell id="6n2m-XyReEJoCltwB4P5-38" parent="1" style="fillColor=#ffff88;strokeColor=#9E916F;" value="Document Download/Preview Flow" vertex="1">
          <mxGeometry height="49" width="1590" x="70" y="1144" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
